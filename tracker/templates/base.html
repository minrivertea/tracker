{% load django_static %}


{% block doctype %}<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
{% endblock %}

<head>

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
	<meta content="en-gb" http-equiv="Content-Language" />
	<meta content="{% block metadescription %}{% endblock %}" name="description" />
	
	<meta name="msvalidate.01" content="D72BD43A6F271B73C8F653A920B8C23C" />
	<meta name="google-site-verification" content="obu9NY_4FNbUQMNlrvWOk59ABZ9gROs37zTql__Lglo" />
	<META name="y_key" content="cfd80b8d388be931" />
	
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="generator" content="Django - http://www.djangoproject.com" />
	<meta name="DC.format" content="text/html" />
	<meta name="DC.type" content="Django Site" />
	<meta name="robots" content="ALL" />
	
	<title>{% block pagetitle %}{% endblock %} TimeTracker</title>
	<link rel="shortcut icon" href="{% staticfile '/images/favicon.ico' %}" type="image/x-icon">
	{% block canonical %}{% endblock %}
	
	{% block extra-head %}{% endblock %}
	
    <link rel="stylesheet" href="{{ static_url }}css/styles.css" />

	<script type="text/javascript" src="{{ static_url }}js/common.js"></script> <!-- my scripts -->

	<script type="text/javascript" src="{{ static_url }}js/jquery-1.6.min.js"></script>
	{% if ga_is_on %}
		<script src="http://cdn.jquerytools.org/1.2.5/full/jquery.tools.min.js"></script>
	{% else %}
		<script src="{{ static_url }}js/jquery.tools.min.js"></script>
	{% endif %}
	   
    {% if not request.user.is_authenticated %}
    <style type="text/css">
        #header, #footer {
          display: none;   
        }
        
        .super {
          margin: 260px auto;   
        }
    </style>
    {% endif %}
    
	{% block extracss %}{% endblock %}


</head>



<body>
    
    {% include 'snippets/header.html' %}
        
    <div id="container">
	{% block content %}{% endblock %}
	</div>
	
	{% include 'snippets/add-form.html' %}
	
	<div id="share-form" class="popout">
        <form action="{% url make_url %}" method="post">
            {% csrf_token %}
            <h3>Make a public calendar URL</h3>
            <p>Assign permissions for people viewing this calendar on this URL. People viewing this calendar can:</p>
            <p><input id="id_can_write" type="checkbox" name="can_write"><label>Add new appointments?</label></p>
            <p><input id="id_can_see_names" type="checkbox" name="can_see_names"><label>See the names of appointments?</label></p>
            <p><input id="id_can_see_details" type="checkbox" name="can_see_details"><label>View details of appointments?</label></p>
            <p><input type="submit" value="Save and create URL" class="button"/></p>
        </form>
    </div>
    
    <div id="user-full" class="popout">
        {% if request.user.is_authenticated %}
            <strong>Hi <a id="username" href="">{{ request.user.username }}</a>!</strong><br/>
            <a id="logout" href="{% url auth_logout %}">Logout</a>
        {% endif %}
    </div>
	
	{% include 'snippets/footer.html' %}


<script type="text/javascript">
$(document).ready( function() {
    $('#expandfooter').bind('click', expandFooter);
    $('#share-form form').bind('submit', makeURL);
    $('#share-button').click(function() {
        
        if ($('#share-form').hasClass('selected')) {
            $(this).removeClass('selected');
            $('#share-form').removeClass('selected');
        } else {
            $(this).addClass('selected');
            $('#share-form').addClass('selected');
        }
        return false;
    });
    
    			// clear input on focus
			var clearMePrevious = '';
			$('.clearMeFocus').each( function() {
				if ($(this).val() == '') {
				    var title = $(this).attr('title');
				    $(this).val(title);
				}
			});
			
			$('.clearMeFocus').focus(function()
			{
				if($(this).val()==$(this).attr('title'))
				{
					clearMePrevious = $(this).val();
					$(this).val('');
					$(this).css('color', '#333');
				}
			});
			
			// if field is empty afterward, add text again
			$('.clearMeFocus').blur(function()
			{
				if($(this).val()=='')
				{
					$(this).val(clearMePrevious);
					$(this).css('color', '#999');
				}
			});
    
});
</script>
{% block extrajs %}{% endblock %}

</body>

</html>
